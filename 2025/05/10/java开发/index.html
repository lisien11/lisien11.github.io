<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>java开发 | L的博客</title><meta name="author" content="L"><meta name="copyright" content="L"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JDBCJDBC全称Java DataBase Connectivity。 JDBC再进行sql查询的步骤如下123451.注册驱动(如mysql的驱动)2.进行数据库连接，获取连接对象3.获取sql语句执行对象4.执行sql语句5.释放资源(直接close即可) 注册驱动(如mysql的驱动)注册驱动有两种方法123DriverManager.registerDriver(new com.mys">
<meta property="og:type" content="article">
<meta property="og:title" content="java开发">
<meta property="og:url" content="https://lisien11.xyz/2025/05/10/java%E5%BC%80%E5%8F%91/index.html">
<meta property="og:site_name" content="L的博客">
<meta property="og:description" content="JDBCJDBC全称Java DataBase Connectivity。 JDBC再进行sql查询的步骤如下123451.注册驱动(如mysql的驱动)2.进行数据库连接，获取连接对象3.获取sql语句执行对象4.执行sql语句5.释放资源(直接close即可) 注册驱动(如mysql的驱动)注册驱动有两种方法123DriverManager.registerDriver(new com.mys">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover23.jpg">
<meta property="article:published_time" content="2025-05-10T07:13:47.000Z">
<meta property="article:modified_time" content="2025-05-12T06:00:42.318Z">
<meta property="article:author" content="L">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover23.jpg"><link rel="shortcut icon" href="/img/1.jpg"><link rel="canonical" href="https://lisien11.xyz/2025/05/10/java%E5%BC%80%E5%8F%91/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'java开发',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-05-12 14:00:42'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/LSE.css"><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="L的博客" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/%E5%9B%BE%E7%89%87/1231.jpg" onerror="onerror=null;src='/img/lll.png'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">152</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">46</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">43</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 个人写的小Demo</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 信息收集</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover23.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="L的博客"><span class="site-name">L的博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 个人写的小Demo</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 信息收集</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">java开发</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-05-10T07:13:47.000Z" title="发表于 2025-05-10 15:13:47">2025-05-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-05-12T06:00:42.318Z" title="更新于 2025-05-12 14:00:42">2025-05-12</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>20分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title="java开发"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><p>JDBC全称Java DataBase Connectivity。</p>
<p>JDBC再进行sql查询的步骤如下<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.注册驱动(如mysql的驱动)</span><br><span class="line">2.进行数据库连接，获取连接对象</span><br><span class="line">3.获取sql语句执行对象</span><br><span class="line">4.执行sql语句</span><br><span class="line">5.释放资源(直接close即可)</span><br></pre></td></tr></table></figure></p>
<h2 id="注册驱动-如mysql的驱动"><a href="#注册驱动-如mysql的驱动" class="headerlink" title="注册驱动(如mysql的驱动)"></a>注册驱动(如mysql的驱动)</h2><p>注册驱动有两种方法<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DriverManager.registerDriver(new com.mysql.cj.jdbc.Driver());</span><br><span class="line"></span><br><span class="line">Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;)</span><br></pre></td></tr></table></figure><br>一种是直接使用驱动管理器DriverManager的registerDriver的方法来注册驱动，而另一种是直接使用forName来加载com.mysql.cj.jdbc.Driverr这个类。</p>
<p>可以发现其类的static块调用了DriverManager.registerDriver(new Driver());<br><img src="/2025/05/10/java%E5%BC%80%E5%8F%91/IMG_20250510-161618911.png" class=""><br>所以这两个从本质上其实没区别。</p>
<h3 id="DriverManager"><a href="#DriverManager" class="headerlink" title="DriverManager"></a>DriverManager</h3><p><code>DriverManager</code> 是 Java JDBC（Java Database Connectivity）API 的核心类之一，它负责<strong>管理数据库驱动</strong>并协调应用程序与数据库之间的连接。以下是其核心作用和工作原理的详细解析：</p>
<hr>
<h3 id="一、DriverManager-的核心作用"><a href="#一、DriverManager-的核心作用" class="headerlink" title="一、DriverManager 的核心作用"></a><strong>一、DriverManager 的核心作用</strong></h3><div class="table-container">
<table>
<thead>
<tr>
<th><strong>功能</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>驱动注册</strong></td>
<td>维护一个已注册的 JDBC 驱动列表（如 MySQL、PostgreSQL 等数据库的驱动）</td>
</tr>
<tr>
<td><strong>连接路由</strong></td>
<td>根据 JDBC URL 的格式（如 <code>jdbc:mysql://...</code>）自动选择匹配的驱动来建立连接</td>
</tr>
<tr>
<td><strong>连接管理</strong></td>
<td>提供统一的接口（<code>getConnection()</code>）创建数据库连接，隐藏底层驱动差异</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h3 id="二、工作原理"><a href="#二、工作原理" class="headerlink" title="二、工作原理"></a><strong>二、工作原理</strong></h3><h4 id="1-驱动注册机制"><a href="#1-驱动注册机制" class="headerlink" title="1. 驱动注册机制"></a><strong>1. 驱动注册机制</strong></h4><ul>
<li><p><strong>自动注册（JDBC 4.0+）</strong>：<br>驱动 JAR 包中的 <code>META-INF/services/java.sql.Driver</code> 文件声明驱动类全名，<code>DriverManager</code> 在首次调用时自动加载这些驱动。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 示例：MySQL 驱动 JAR 中的声明文件</span><br><span class="line">com.mysql.cj.jdbc.Driver</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>手动注册（旧版本兼容）</strong>：<br>通过 <code>Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;)</code> 触发驱动的静态代码块注册。</p>
</li>
</ul>
<h4 id="2-连接建立流程"><a href="#2-连接建立流程" class="headerlink" title="2. 连接建立流程"></a><strong>2. 连接建立流程</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例：获取 MySQL 连接</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(</span><br><span class="line">    <span class="string">&quot;jdbc:mysql://localhost:3306/mydb&quot;</span>, </span><br><span class="line">    <span class="string">&quot;user&quot;</span>, </span><br><span class="line">    <span class="string">&quot;password&quot;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>解析 URL</strong>：<code>DriverManager</code> 遍历所有已注册驱动，找到能识别 <code>jdbc:mysql://</code> 前缀的驱动（如 MySQL 驱动）。</li>
<li><strong>创建连接</strong>：匹配的驱动实例调用 <code>connect()</code> 方法，与数据库建立 TCP 连接并完成认证。</li>
<li><strong>返回 Connection 对象</strong>：封装数据库连接的 Java 对象，用于后续 SQL 操作。</li>
</ol>
<hr>
<h3 id="三、关键方法"><a href="#三、关键方法" class="headerlink" title="三、关键方法"></a><strong>三、关键方法</strong></h3><div class="table-container">
<table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>static Connection getConnection(String url, String user, String password)</code></td>
<td>根据 URL、用户名、密码获取数据库连接</td>
</tr>
<tr>
<td><code>static void registerDriver(Driver driver)</code></td>
<td>手动注册驱动（通常不需要直接调用）</td>
</tr>
<tr>
<td><code>static void deregisterDriver(Driver driver)</code></td>
<td>从注册列表中移除驱动</td>
</tr>
<tr>
<td><code>static Enumeration&lt;Driver&gt; getDrivers()</code></td>
<td>获取所有已注册的驱动实例</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="进行数据库连接，获取连接对象"><a href="#进行数据库连接，获取连接对象" class="headerlink" title="进行数据库连接，获取连接对象"></a>进行数据库连接，获取连接对象</h2><p>我们使用DriverManager的getConnection来进行数据库的连接<br>DriverManager.getConnection(String url, String user, String password)<br><img src="/2025/05/10/java%E5%BC%80%E5%8F%91/IMG_20250510-162455934.png" class=""><br>其url的结构为<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jdbc:+数据库类型+://+地址+/+数据库名</span><br><span class="line">如</span><br><span class="line">jdbc:mysql://127.0.0.1:3306/web</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection connection= DriverManager.getConnection(&quot;jdbc:mysql://127.0.0.1:3306/web&quot;,&quot;root&quot;,&quot;root11&quot;);</span><br></pre></td></tr></table></figure>
<h2 id="获取命令执行对象"><a href="#获取命令执行对象" class="headerlink" title="获取命令执行对象"></a>获取命令执行对象</h2><p>jdbc存在存在三种命令执行对象<br>| ​对象​            | ​核心用途​        | ​安全性​ | ​性能​           |<br>| :———————— | :———————— | :———- | :———————- |<br>| Statement         | 静态 SQL          | 低       | 低（无预编译）   |<br>| PreparedStatement | 动态参数化 SQL    | 高       | 高（支持预编译） |<br>| CallableStatement | 存储过程/函数调用 | 高       | 依赖数据库逻辑   |</p>
<p>我们常用的是Statement和PreparedStatement，PreparedStatement是支持预编译的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Statement stmt=connection.createStatement();</span><br><span class="line">PreparedStatement preparedStatement=connection.prepareStatement(<span class="string">&quot;insert into user values(?,?,?)&quot;</span>);<span class="comment">//sql预编译</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h2 id="执行sql语句"><a href="#执行sql语句" class="headerlink" title="执行sql语句"></a>执行sql语句</h2><h3 id="Statement"><a href="#Statement" class="headerlink" title="Statement"></a>Statement</h3><p>Statement sql语句的主要操作函数有如下三个<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">executeQuery() <span class="comment">//执行select查询语句</span></span><br><span class="line">executrupdate() <span class="comment">//可以执行insert，update，delect，CREATE，之类的</span></span><br><span class="line">execute() <span class="comment">//执行任意语句</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stmt.executeQuery(&quot;Select database()&quot;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="PreparedStatement"><a href="#PreparedStatement" class="headerlink" title="PreparedStatement"></a>PreparedStatement</h3><p>PreparedStatement其sql语句是在其获取命令执行对象时就以及写入了预编译语句。其要进行sql执行只要对其参数进行传入即可<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">input=2</span><br><span class="line">PreparedStatement psmt=connection.prepareStatement(&quot;Select * from Users and where id=?&quot;)</span><br><span class="line">psmt.set(1,input)</span><br><span class="line">psmt.executeQuery()</span><br></pre></td></tr></table></figure></p>
<h2 id="整体代码"><a href="#整体代码" class="headerlink" title="整体代码\"></a>整体代码\</h2><h3 id="Statement-1"><a href="#Statement-1" class="headerlink" title="Statement"></a>Statement</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JDBC;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mysql_Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">CreatTable</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="comment">//注册驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driverr&quot;</span>);</span><br><span class="line">        <span class="comment">//mysql连接获取连接对象</span></span><br><span class="line">        Connection connection= DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://127.0.0.1:3306/web&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;root11&quot;</span>);</span><br><span class="line">        <span class="comment">//获取sql执行对象</span></span><br><span class="line">        Statement statement=connection.createStatement();</span><br><span class="line">        <span class="comment">//命令执行</span></span><br><span class="line">        String sql=<span class="string">&quot;CREATE TABLE IF NOT EXISTS users (\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    id INT PRIMARY KEY AUTO_INCREMENT,        -- 主键，自增\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    username VARCHAR(50) NOT NULL UNIQUE,    -- 唯一且非空\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    email VARCHAR(100) NOT NULL,\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    age INT CHECK (age &gt;= 18),               -- 年龄必须 ≥18\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- 默认时间\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;);&quot;</span>;</span><br><span class="line">        statement.execute(sql);</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="PreparedStatement-1"><a href="#PreparedStatement-1" class="headerlink" title="PreparedStatement"></a>PreparedStatement</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ResultSet <span class="title function_">SelectByName</span><span class="params">(String name)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getconn(<span class="string">&quot;jdbc:mysql://localhost:3306/web&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;root11&quot;</span>);</span><br><span class="line">    String sql=<span class="string">&quot;select * from users where username=?&quot;</span>;</span><br><span class="line">    PreparedStatement  pstmt=conn.prepareStatement(sql);</span><br><span class="line">    pstmt.setString(<span class="number">1</span>,name);</span><br><span class="line">    ResultSet rs=pstmt.executeQuery();</span><br><span class="line">    <span class="keyword">return</span> rs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在jdbc查询时返回的是ResultSet这个接口类<br>我们想查看这个查询结果就需要使用，getString，getInt来获取<br><img src="/2025/05/10/java%E5%BC%80%E5%8F%91/IMG_20250510-185213434.png" class=""><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> lse.kaifa;</span><br><span class="line"><span class="keyword">import</span> JDBC.Mysql_Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException &#123;</span><br><span class="line">        ResultSet res= sql.SelectByName(<span class="string">&quot;LSE&quot;</span>);</span><br><span class="line">        res.next(); </span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> res.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> res.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            System.out.println(name + <span class="string">&quot;\n&quot;</span> + password);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>需要注意的是我们所得到的ResultSet类的实例，其初始的索引是不在第一行的，我们想获取内容需要使用next使得索引内移</p>
<h2 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Mysql_Test.java</span></span><br><span class="line"><span class="keyword">package</span> JDBC;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mysql_Test</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Connection <span class="title function_">getconn</span><span class="params">(String Url,String username,String password)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(Url,username,password);</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">CreatTable</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="comment">//注册驱动</span></span><br><span class="line">        <span class="comment">//mysql连接获取连接对象</span></span><br><span class="line">        Connection connection= getconn(<span class="string">&quot;jdbc:mysql://127.0.0.1:3306/web&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;root11&quot;</span>);</span><br><span class="line">        <span class="comment">//获取sql执行对象</span></span><br><span class="line">        Statement statement=connection.createStatement();</span><br><span class="line">        <span class="comment">//命令执行</span></span><br><span class="line">        String sql=<span class="string">&quot;CREATE TABLE IF NOT EXISTS users (\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    id INT PRIMARY KEY AUTO_INCREMENT,        -- 主键，自增\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    username VARCHAR(50) NOT NULL UNIQUE,    -- 唯一且非空\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    password VARCHAR(100) NOT NULL,\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    email VARCHAR(100) NOT NULL,               -- 年龄必须 ≥18\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- 默认时间\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;);&quot;</span>;</span><br><span class="line">        statement.execute(sql);</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delectTableName</span><span class="params">(String TableName)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        Connection conn=getconn(<span class="string">&quot;jdbc:mysql://localhost:3306/web&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;root11&quot;</span>);</span><br><span class="line">        String sql=<span class="string">&quot;Drop Table &quot;</span>+TableName;</span><br><span class="line">        PreparedStatement  pstmt=conn.prepareStatement(sql);<span class="comment">//FROM后不能预处理，预处理胡报错</span></span><br><span class="line">        pstmt.execute();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Update</span><span class="params">(String name,String password,String email,<span class="type">int</span> id)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException &#123;</span><br><span class="line">        Connection conn=getconn(<span class="string">&quot;jdbc:mysql://localhost:3306/web&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;root11&quot;</span>);</span><br><span class="line">        String sql=<span class="string">&quot;Update users set username=?,password=?,email=? where id=?&quot;</span>;</span><br><span class="line">        PreparedStatement  pstmt=conn.prepareStatement(sql);</span><br><span class="line">        pstmt.setString(<span class="number">1</span>,name);</span><br><span class="line">        pstmt.setString(<span class="number">2</span>,password);</span><br><span class="line">        pstmt.setString(<span class="number">3</span>,email);</span><br><span class="line">        pstmt.setInt(<span class="number">4</span>,id);</span><br><span class="line">        pstmt.execute();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Insert</span><span class="params">(String name,String password,String email)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException &#123;</span><br><span class="line">        Connection conn=getconn(<span class="string">&quot;jdbc:mysql://localhost:3306/web&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;root11&quot;</span>);</span><br><span class="line">        String sql=<span class="string">&quot;Insert into users (username,password,email) values(?,?,?)&quot;</span>;</span><br><span class="line">        PreparedStatement  pstmt=conn.prepareStatement(sql);</span><br><span class="line">        pstmt.setString(<span class="number">1</span>,name);</span><br><span class="line">        pstmt.setString(<span class="number">2</span>,password);</span><br><span class="line">        pstmt.setString(<span class="number">3</span>,email);</span><br><span class="line">        pstmt.execute();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> ResultSet <span class="title function_">SelectByName</span><span class="params">(String name)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getconn(<span class="string">&quot;jdbc:mysql://localhost:3306/web&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;root11&quot;</span>);</span><br><span class="line">        String sql=<span class="string">&quot;select * from users where username=?&quot;</span>;</span><br><span class="line">        PreparedStatement  pstmt=conn.prepareStatement(sql);</span><br><span class="line">        pstmt.setString(<span class="number">1</span>,name);</span><br><span class="line">        ResultSet rs=pstmt.executeQuery();</span><br><span class="line">        <span class="keyword">return</span> rs;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//test.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> lse.kaifa;</span><br><span class="line"><span class="keyword">import</span> JDBC.Mysql_Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">Mysql_Test</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Mysql_Test</span>();</span><br><span class="line">        <span class="comment">//sql.delectTableName(&quot;users&quot;);</span></span><br><span class="line">        <span class="comment">//sql.CreatTable();</span></span><br><span class="line">        <span class="comment">//sql.Insert(&quot;LSE1&quot;,&quot;LSE11&quot;,&quot;LSE@qq.com&quot;);</span></span><br><span class="line">        <span class="comment">//sql.Update(&quot;LSE&quot;,&quot;222&quot;,&quot;LSE@qq.com&quot;,1);</span></span><br><span class="line">        ResultSet res= sql.SelectByName(<span class="string">&quot;LSE&quot;</span>);</span><br><span class="line">        res.next();</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> res.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> res.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            System.out.println(name + <span class="string">&quot;\n&quot;</span> + password);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="MyBatis的使用"><a href="#MyBatis的使用" class="headerlink" title="MyBatis的使用"></a>MyBatis的使用</h1><p>MyBatis是一个基于JDBC包装简化sql查询编写的组件。<br>我们可以将上面较长的代码编写成如下一小段</p>
<img src="/2025/05/10/java%E5%BC%80%E5%8F%91/IMG_20250511-133708973.png" class="">  
<img src="/2025/05/10/java%E5%BC%80%E5%8F%91/IMG_20250511-133720803.png" class="">  
<img src="/2025/05/10/java%E5%BC%80%E5%8F%91/IMG_20250511-133743636.png" class="">  
<img src="/2025/05/10/java%E5%BC%80%E5%8F%91/IMG_20250511-135330206.png" class="">  
<p>我们只要编写好一个接口，写上Mapeper，Mapper<br>Scan这些注解，一个User类，和配置好连接配置，就可以调用sql查询了。</p>
<h2 id="编写的整体代码"><a href="#编写的整体代码" class="headerlink" title="编写的整体代码"></a>编写的整体代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> MyBatis;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@Data // 生成通用方法</span></span><br><span class="line"><span class="comment">//@AllArgsConstructor // 全参构造</span></span><br><span class="line"><span class="comment">//@NoArgsConstructor // 无参构造</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;id:&quot;</span>+id+<span class="string">&quot;,username:&quot;</span>+username+<span class="string">&quot;,password:&quot;</span>+password+<span class="string">&quot;,email:&quot;</span>+email+<span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> MyBatis.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MyBatis.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from users where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectAllUsers</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Application</span></span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;MyBatis.Mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置</span></span><br><span class="line"># MyBatis 配置</span><br><span class="line">mybatis.mapper-locations=classpath:mappers<span class="comment">/**/*.xml</span></span><br><span class="line"><span class="comment">mybatis.type-aliases-package=com.example.demo.mybatis.entity</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 服务器端口</span></span><br><span class="line"><span class="comment">server.port=8080</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 数据源配置</span></span><br><span class="line"><span class="comment">spring.datasource.url=jdbc:mysql://localhost:3306/web</span></span><br><span class="line"><span class="comment">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment">spring.datasource.username=root</span></span><br><span class="line"><span class="comment">spring.datasource.password=root11</span></span><br></pre></td></tr></table></figure>
<h3 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h3><p>在Mybatis的调用中，因为我们使用的是springboot包装的，所以我们没法再mian中调用，spring是可以再service和Controller 中调用MyBatis的，这里我直接使用单元测试类。来测试<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MyBatis.Mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> MyBatis.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DemoApplicationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">SelectAllUser</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; list =userMapper.selectAllUsers(<span class="number">1</span>);</span><br><span class="line">        list.forEach(user -&gt; System.out.println(user));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>@Autowired是Springboot的注解作用是注入bean，其实就是注入对象。<br>我们在前面编写Mapper时使用了一个@Mapper的注解这个注解，的作用是标记这个接口。在应用程序启动时其依赖 ​MyBatis-Spring 和注解@MapperScan来生成动态代理。（@MapperScan 会扫描指定包下的接口，并为其生成代理对象。）<br>我们使用@Autowired注入的就是这个动态代理对象，即我们的<code>private UserMapper userMapper</code>的userMapper是这个动态代理对像</p>
<img src="/2025/05/10/java%E5%BC%80%E5%8F%91/IMG_20250511-135449453.png" class="">  
<p>这个单元测试其实就是启动了springbootr</p>
<h2 id="id-与"><a href="#id-与" class="headerlink" title="#{id}与${}"></a><code>#&#123;id&#125;与$&#123;&#125;</code></h2><p>这个其实之前就有接触过，#是预编译而$则是直接替换</p>
<h2 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h2><p>我们可以通过在配置文件中添加<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure><br>其会使得mybatis运行的sql语句在控制台输出<br><img src="/2025/05/10/java%E5%BC%80%E5%8F%91/IMG_20250511-140649822.png" class=""><br>我们也可以从日志中看到预编译的过程</p>
<h2 id="增删改查-1"><a href="#增删改查-1" class="headerlink" title="增删改查"></a>增删改查</h2><p>Mybatis的增删改查和前面的查询操作差不多，就是使用注解不同</p>
<h3 id="insert"><a href="#insert" class="headerlink" title="@insert"></a>@insert</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> MyBatis.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MyBatis.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Insert;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into users (username,password,email) values (#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insertUser</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username,<span class="meta">@Param(&quot;password&quot;)</span> String password,<span class="meta">@Param(&quot;email&quot;)</span> String email)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MyBatis.Mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> MyBatis.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DemoApplicationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">SelectAllUser</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; list =userMapper.selectAllUsers(<span class="number">1</span>);</span><br><span class="line">        list.forEach(user -&gt; System.out.println(user));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">InsertUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> i=userMapper.insertUser(<span class="string">&quot;ad1min&quot;</span>,<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;1admin&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;增加跳数&quot;</span>+i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在我们使用mybatis传入多个值的时候需要使用@Param(“password”)标记我们的遍历，因为MyBatis 在未使用 @Param 注解时，会将方法参数按位置命名为 arg0, arg1, arg2（JDK 8+ 未开启 -parameters 编译参数）或 param1, param2, param3。</p>
<p>如果没有使用@Param就会抛出xxx not found</p>
<h3 id="update"><a href="#update" class="headerlink" title="@update"></a>@update</h3><p>差不多<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> MyBatis.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MyBatis.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from users where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectAllUsers</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into users (username,password,email) values (#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insertUser</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username,<span class="meta">@Param(&quot;password&quot;)</span> String password,<span class="meta">@Param(&quot;email&quot;)</span> String email)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update users set username=#&#123;username&#125;,password=#&#123;password&#125; where id =#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">updateUser</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username,<span class="meta">@Param(&quot;password&quot;)</span> String password,<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MyBatis.Mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> MyBatis.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DemoApplicationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">UpdateUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span>userMapper.updateUser(<span class="string">&quot;lalala&quot;</span>,<span class="string">&quot;123456&quot;</span>,<span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;修改&quot;</span>+i+<span class="string">&quot;条&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h3 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h3><p>也差不多使用@Delete来删除<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Delete(&quot;Delete from users where id =#&#123;id&#125;&quot;)</span><br><span class="line">public int deleteUser(@Param(&quot;id&quot;)int id);</span><br></pre></td></tr></table></figure></p>
<h2 id="xml配置"><a href="#xml配置" class="headerlink" title="xml配置"></a>xml配置</h2><p>XML配置有几个规范<br>xml放在资源文件夹里，xml下的包名和接口的包名相同，xml文件名和接口类的文件名相同<br>xml的mapper中的namespace值为mapper接口的全类名<br>xml映射文件的select语句中的id值和方法名相同，还得规定返回类型<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package MyBatis.Mapper;</span><br><span class="line"></span><br><span class="line">import MyBatis.User;</span><br><span class="line">import org.apache.ibatis.annotations.*;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line">public interface UserMapper &#123;</span><br><span class="line">    public List&lt;User&gt; selectAllUsers(int id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//UserMapper.xml</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;mapper namespace=&quot;MyBatis.Mapper.UserMapper&quot;&gt;</span><br><span class="line">    &lt;select id=&quot;selectAllUsers&quot; resultType=&quot;MyBatis.User&quot;&gt;</span><br><span class="line">        SELECT * FROM users where id =#&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>下面来解释一下<code>&lt;mapper namespace=&quot;MyBatis.Mapper.UserMapper&quot;&gt;</code>的意思是映射的类为namespace的值<br>而select标签其实就是注解中脑洞@Select如果是@Updat就用update标签<br>id就是方法名，resultType就是返回类型<br><img src="/2025/05/10/java%E5%BC%80%E5%8F%91/IMG_20250511-152751079.png" class="">  </p>
<h1 id="三层架构，ioc，di"><a href="#三层架构，ioc，di" class="headerlink" title="三层架构，ioc，di"></a>三层架构，ioc，di</h1><p>首先简单说一下三层架构吧</p>
<h2 id="简介三层架构"><a href="#简介三层架构" class="headerlink" title="简介三层架构"></a>简介三层架构</h2><p>三层架构也就是Contorller,Service,dao，分别是控制器，业务逻辑层，数据处理层。将我们的代码分为这三层可以很好的对我们的项目进行维护。</p>
<h2 id="高耦合低内聚"><a href="#高耦合低内聚" class="headerlink" title="高耦合低内聚"></a>高耦合低内聚</h2><p>耦合性也就是不同层之间的关系，而内聚就是层内代码的关联度，而不同层中要尽量低耦合这样在不同层修改时可以做到层与层之间影响最小</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>我们来看下面这个三层结构的代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.LSE.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.LSE.Service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.LSE.dto.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.Mapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> UserService userService;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/Users&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">Users</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; list = userService.findAll();</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.LSE.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String username;</span><br><span class="line">    <span class="keyword">public</span> String password;</span><br><span class="line">    <span class="keyword">public</span> String email;</span><br><span class="line">    <span class="keyword">public</span> String created_at;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.LSE.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.LSE.dto.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from users&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.LSE.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.LSE.dto.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.LSE.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.LSE.Mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.LSE.dto.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceimpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> UserMapper userMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; list = userMapper.findAll();</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>我上面的代码较为不错的展示了三层架构，其中还用到了ioc和di这个知识点也就是AutoWired这个注解。</p>
<p>如果没有这个注解我们的代码应该是将<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    @Autowired</span><br><span class="line">    public UserService userService;</span><br><span class="line">改为</span><br><span class="line">    public UserService userService=new UserServiceimpl;</span><br></pre></td></tr></table></figure><br>也就是要用到new来实例化方法，这就导致我我们代码之间的关联度增加了，也就是当我们service层的代码改变如类名改了我们的Contorller层就得改。这时候就要友人ioc和id了</p>
<h2 id="ioc与di"><a href="#ioc与di" class="headerlink" title="ioc与di"></a>ioc与di</h2><p>这两个的全称为Inversion of Control(控制反转)和 Dependency Injection(依赖注入)<br>ico的作用就是将我们类的bean传到容器中，DI的作用就是将我们容器的bean注入到变量里</p>
<p>这样添加一个容器我们就可以降低各个层间的耦合度</p>
<h3 id="ioc"><a href="#ioc" class="headerlink" title="ioc"></a>ioc</h3><p>我们在springboot中可以使用@Component来对我们要传入容器的类进行标记。这样在程序启动时就会自动将其传入容器<br>当一帮不使用这个而是使用如下的</p>
<h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><div class="table-container">
<table>
<thead>
<tr>
<th>注解</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@Component</code></td>
<td>通用注解，标记一个类为 Spring 管理的 Bean</td>
<td><code>@Component public class UserService &#123;&#125;</code></td>
</tr>
<tr>
<td><code>@Service</code></td>
<td>语义化注解，用于<strong>业务层</strong>（Service 类）</td>
<td><code>@Service public class UserServiceImpl &#123;&#125;</code></td>
</tr>
<tr>
<td><code>@Repository</code></td>
<td>语义化注解，用于<strong>数据访问层</strong>（DAO 类）</td>
<td><code>@Repository public class UserDaoImpl &#123;&#125;</code></td>
</tr>
<tr>
<td><code>@Controller</code></td>
<td>语义化注解，用于<strong>控制器层</strong>（Web 请求处理）</td>
<td><code>@Controller public class UserController &#123;&#125;</code></td>
</tr>
<tr>
<td><code>@Configuration</code></td>
<td>标记一个类为<strong>配置类</strong>，定义 Bean</td>
<td><code>@Configuration public class AppConfig &#123;&#125;</code></td>
</tr>
<tr>
<td><code>@Bean</code></td>
<td>在配置类中定义 Bean 的方法上使用</td>
<td><code>@Bean public DataSource dataSource() &#123; ... &#125;</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-DI（依赖注入）的注解"><a href="#2-DI（依赖注入）的注解" class="headerlink" title="2. DI（依赖注入）的注解"></a><strong>2. DI（依赖注入）的注解</strong></h3><h4 id="2-1-自动注入"><a href="#2-1-自动注入" class="headerlink" title="2.1 自动注入"></a><strong>2.1 自动注入</strong></h4><div class="table-container">
<table>
<thead>
<tr>
<th>注解</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@Autowired</code></td>
<td><strong>按类型</strong>自动注入依赖（默认优先匹配类型）</td>
<td><code>@Autowired private UserService userService;</code></td>
</tr>
<tr>
<td><code>@Qualifier</code></td>
<td><strong>按名称</strong>指定注入的 Bean（配合 <code>@Autowired</code> 使用）</td>
<td><code>@Autowired @Qualifier(&quot;mysqlUserDao&quot;) private UserDao userDao;</code></td>
</tr>
<tr>
<td><code>@Primary</code></td>
<td>标记<strong>优先注入</strong>的 Bean（解决同一类型多个 Bean 的冲突）</td>
<td><code>@Primary @Service public class DefaultUserService &#123;&#125;</code></td>
</tr>
<tr>
<td><code>@Resource</code></td>
<td><strong>按名称</strong>注入（JDK 原生注解，支持 <code>name</code> 属性）</td>
<td><code>@Resource(name = &quot;userDao&quot;) private UserDao dao;</code></td>
</tr>
<tr>
<td><code>@Inject</code></td>
<td><strong>按类型</strong>注入（需依赖 <code>javax.inject</code>，类似 <code>@Autowired</code>）</td>
<td><code>@Inject private PaymentService paymentService;</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="冲突"><a href="#冲突" class="headerlink" title="冲突"></a>冲突</h4><p>当一个接口有多个bean时就可能对造成bean冲突，这时候我们就需要使用@Primary和@Qualifier()来进行注入<br>bean的名称默认是类首字母小写</p>
<h4 id="2-2-注入方式"><a href="#2-2-注入方式" class="headerlink" title="2.2 注入方式"></a><strong>2.2 注入方式</strong></h4><h5 id="直接注入"><a href="#直接注入" class="headerlink" title="直接注入"></a>直接注入</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserDao userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="构造器注入"><a href="#构造器注入" class="headerlink" title="构造器注入"></a>构造器注入</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造器注入（Spring 4.3+ 可省略 @Autowired）</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="setter方法注入"><a href="#setter方法注入" class="headerlink" title="setter方法注入"></a>setter方法注入</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserDao userDao;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">setUserService</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-组件扫描与配置"><a href="#3-组件扫描与配置" class="headerlink" title="3. 组件扫描与配置"></a><strong>3. 组件扫描与配置</strong></h3><div class="table-container">
<table>
<thead>
<tr>
<th>注解</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@ComponentScan</code></td>
<td>指定 Spring 扫描 Bean 的包路径（通常用于主类）</td>
<td><code>@ComponentScan(&quot;com.example&quot;)</code></td>
</tr>
<tr>
<td><code>@Profile</code></td>
<td>指定 Bean 的生效环境（如 <code>dev</code>、<code>test</code>、<code>prod</code>）</td>
<td><code>@Profile(&quot;dev&quot;) @Service public class MockUserService &#123;&#125;</code></td>
</tr>
<tr>
<td><code>@Conditional</code></td>
<td><strong>条件化注入</strong>（根据条件决定是否创建 Bean）</td>
<td><code>@Conditional(OnCloudCondition.class)</code></td>
</tr>
</tbody>
</table>
</div>
<hr>
<h1 id=""><a href="#" class="headerlink" title=" "></a> </h1></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://lisien11.xyz">L</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://lisien11.xyz/2025/05/10/java%E5%BC%80%E5%8F%91/">https://lisien11.xyz/2025/05/10/java%E5%BC%80%E5%8F%91/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lisien11.xyz" target="_blank">L的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover23.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/05/13/%E5%B7%A5%E5%85%B7%E5%88%86%E6%9E%90ysoSerial/" title="工具分析ysoSerial"><img class="cover" src="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover21.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">工具分析ysoSerial</div></div></a></div><div class="next-post pull-right"><a href="/2025/05/05/SnakeYaml/" title="SnakeYaml"><img class="cover" src="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover50.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">SnakeYaml</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/%E5%9B%BE%E7%89%87/1231.jpg" onerror="this.onerror=null;this.src='/img/lll.png'" alt="avatar"/></div><div class="author-info__name">L</div><div class="author-info__description">我只是一个平平无奇路过的普通大学生罢了</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">152</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">46</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">43</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lisien11"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="/atom.xml" target="_blank" title="订阅-ATOM"><i class="fas fa-rss"></i></a><a class="social-icon" href="https://github.com/lisien11" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:2488218724@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">无人问津也好，技不如人也罢，你都要试着安静下来，去做自己该做的事，而不是让内心烦躁焦虑，毁掉你本就不多的热情和定力。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JDBC"><span class="toc-number">1.</span> <span class="toc-text">JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E9%A9%B1%E5%8A%A8-%E5%A6%82mysql%E7%9A%84%E9%A9%B1%E5%8A%A8"><span class="toc-number">1.1.</span> <span class="toc-text">注册驱动(如mysql的驱动)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DriverManager"><span class="toc-number">1.1.1.</span> <span class="toc-text">DriverManager</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81DriverManager-%E7%9A%84%E6%A0%B8%E5%BF%83%E4%BD%9C%E7%94%A8"><span class="toc-number">1.1.2.</span> <span class="toc-text">一、DriverManager 的核心作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.1.3.</span> <span class="toc-text">二、工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%A9%B1%E5%8A%A8%E6%B3%A8%E5%86%8C%E6%9C%BA%E5%88%B6"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">1. 驱动注册机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B%E6%B5%81%E7%A8%8B"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">2. 连接建立流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%85%B3%E9%94%AE%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.4.</span> <span class="toc-text">三、关键方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%EF%BC%8C%E8%8E%B7%E5%8F%96%E8%BF%9E%E6%8E%A5%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.</span> <span class="toc-text">进行数据库连接，获取连接对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.3.</span> <span class="toc-text">获取命令执行对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A7%E8%A1%8Csql%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.4.</span> <span class="toc-text">执行sql语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Statement"><span class="toc-number">1.4.1.</span> <span class="toc-text">Statement</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PreparedStatement"><span class="toc-number">1.4.2.</span> <span class="toc-text">PreparedStatement</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E4%BB%A3%E7%A0%81"><span class="toc-number">1.5.</span> <span class="toc-text">整体代码\</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Statement-1"><span class="toc-number">1.5.1.</span> <span class="toc-text">Statement</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PreparedStatement-1"><span class="toc-number">1.5.2.</span> <span class="toc-text">PreparedStatement</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">1.6.</span> <span class="toc-text">增删改查</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MyBatis%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">MyBatis的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E7%9A%84%E6%95%B4%E4%BD%93%E4%BB%A3%E7%A0%81"><span class="toc-number">2.1.</span> <span class="toc-text">编写的整体代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8"><span class="toc-number">2.1.1.</span> <span class="toc-text">调用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#id-%E4%B8%8E"><span class="toc-number">2.2.</span> <span class="toc-text">#{id}与${}</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97"><span class="toc-number">2.3.</span> <span class="toc-text">日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5-1"><span class="toc-number">2.4.</span> <span class="toc-text">增删改查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#insert"><span class="toc-number">2.4.1.</span> <span class="toc-text">@insert</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#update"><span class="toc-number">2.4.2.</span> <span class="toc-text">@update</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Delete"><span class="toc-number">2.4.3.</span> <span class="toc-text">Delete</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xml%E9%85%8D%E7%BD%AE"><span class="toc-number">2.5.</span> <span class="toc-text">xml配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%EF%BC%8Cioc%EF%BC%8Cdi"><span class="toc-number">3.</span> <span class="toc-text">三层架构，ioc，di</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-number">3.1.</span> <span class="toc-text">简介三层架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E8%80%A6%E5%90%88%E4%BD%8E%E5%86%85%E8%81%9A"><span class="toc-number">3.2.</span> <span class="toc-text">高耦合低内聚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-number">3.3.</span> <span class="toc-text">代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ioc%E4%B8%8Edi"><span class="toc-number">3.4.</span> <span class="toc-text">ioc与di</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ioc"><span class="toc-number">3.4.1.</span> <span class="toc-text">ioc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3"><span class="toc-number">3.4.2.</span> <span class="toc-text">注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-DI%EF%BC%88%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%EF%BC%89%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="toc-number">3.4.3.</span> <span class="toc-text">2. DI（依赖注入）的注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5"><span class="toc-number">3.4.3.1.</span> <span class="toc-text">2.1 自动注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%B2%E7%AA%81"><span class="toc-number">3.4.3.2.</span> <span class="toc-text">冲突</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">3.4.3.3.</span> <span class="toc-text">2.2 注入方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E6%B3%A8%E5%85%A5"><span class="toc-number">3.4.3.3.1.</span> <span class="toc-text">直接注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5"><span class="toc-number">3.4.3.3.2.</span> <span class="toc-text">构造器注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#setter%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5"><span class="toc-number">3.4.3.3.3.</span> <span class="toc-text">setter方法注入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-number">3.4.4.</span> <span class="toc-text">3. 组件扫描与配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text"> </span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/06/07/hnctf/" title="hnctf"><img src="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover52.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hnctf"/></a><div class="content"><a class="title" href="/2025/06/07/hnctf/" title="hnctf">hnctf</a><time datetime="2025-06-07T12:40:56.000Z" title="发表于 2025-06-07 20:40:56">2025-06-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/04/D3CTF-1/" title="D3CTF"><img src="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover90.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="D3CTF"/></a><div class="content"><a class="title" href="/2025/06/04/D3CTF-1/" title="D3CTF">D3CTF</a><time datetime="2025-06-04T08:31:19.000Z" title="发表于 2025-06-04 16:31:19">2025-06-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/03/D3CTF/" title="D3CTF"><img src="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover47.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="D3CTF"/></a><div class="content"><a class="title" href="/2025/06/03/D3CTF/" title="D3CTF">D3CTF</a><time datetime="2025-06-03T10:36:03.000Z" title="发表于 2025-06-03 18:36:03">2025-06-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/03/litCTF/" title="litCTF"><img src="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover81.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="litCTF"/></a><div class="content"><a class="title" href="/2025/06/03/litCTF/" title="litCTF">litCTF</a><time datetime="2025-06-03T10:34:45.000Z" title="发表于 2025-06-03 18:34:45">2025-06-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/29/snakeyaml%E4%B8%8D%E5%87%BA%E7%BD%91%E5%88%A9%E7%94%A8/" title="fastjson&amp;&amp;snakeyaml不出网利用"><img src="https://raw.githubusercontent.com/lisien11/lisien11.github.io/refs/heads/master/cover/cover52.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="fastjson&amp;&amp;snakeyaml不出网利用"/></a><div class="content"><a class="title" href="/2025/05/29/snakeyaml%E4%B8%8D%E5%87%BA%E7%BD%91%E5%88%A9%E7%94%A8/" title="fastjson&amp;&amp;snakeyaml不出网利用">fastjson&amp;&amp;snakeyaml不出网利用</a><time datetime="2025-05-29T02:06:01.000Z" title="发表于 2025-05-29 10:06:01">2025-05-29</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By L</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://tw-sigma.vercel.app/',
      region: 'ap-guangzhou',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(init)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://tw-sigma.vercel.app/',
      region: 'ap-guangzhou',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
      
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script async data-pjax src="/js/LSE.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>